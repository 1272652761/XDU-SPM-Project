<!doctype html>
<html class="no-js" lang="zxx">

<head>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<title>Home</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- Google font (font-family: 'Roboto', sans-serif; Poppins ; Satisfy) -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Poppins:300,300i,400,400i,500,600,600i,700,700i,800" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
	<!-- Stylesheets -->
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/plugins.css">
	<link rel="stylesheet" href="style.css">
	<!-- Cusom css -->
	<link rel="stylesheet" href="css/custom.css">
	<!-- Modernizer js -->
	<script src="js/vendor/modernizr-3.5.0.min.js"></script>
</head>


<body>
	<!-- Main wrapper -->
	<div class="wrapper" id="wrapper">
		<!-- Header -->
		<header id="wn__header" class="header__area header__absolute sticky__header ">
			<div class="container-fluid ">
				<div class="row">
					<div class="col-md-6 col-sm-6 col-6 col-lg-2">
						<div class="logo-area">
							<a href="index.html">
								<img src="images/logo/logo黑字.png" alt="">
							</a>
						</div>
					</div>
					<div class="col-lg-8 d-none d-lg-block">
						<nav class="mainmenu__nav">
						</nav>
					</div><!-- 留空 -->
					<div class="col-md-6 col-sm-6 col-6 col-lg-2">
						<ul class="header__sidebar__right d-flex justify-content-end align-items-center">
							<li id='topMenu' class="setting__bar__icon"><a class="setting__active" href="#"></a>
								<!--


    						<button id="ME" value="SIGN IN" onclick="personConsole()" class="btn btn-primary">ME</button>
    						 -->
								<script type="text/javascript">


								</script>
								<button id="SI" value="SIGN IN" onclick="signinServer()" class="btn btn-primary">SIGN IN</button>
								<div class="searchbar__content setting__block">
									<div class="content-inner">
										<div class="switcher-currency">
											<strong class="label switcher-label">
												<span>Language</span>
											</strong>
											<div class="switcher-options">
												<div class="switcher-currency-trigger">
													<span class="currency-trigger">English</span>
													<ul class="switcher-dropdown">
														<li>中文</li>
													</ul>
												</div>
											</div>
										</div>
									</div>
								</div>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</header>

		<div class="slider-area brown__nav slider--15 slide__activation slide__arrow01 owl-carousel owl-theme">

			<div class="slide animation__style10 bg-image--9 fullscreen align__center--left">
				<div class="container">
					<div class="row">
						<div class="col-lg-12">
							<div class="slider__content">
								<div class="contentbox">
									<h2>Read favourite <span> books</span></h2>
									<h2>From <span> here </span></h2>
									</br>
								</div>
								<div class="col-md-10 col-lg-8 col-xl-7 mx-auto">
									<form>
										<div class="form-row">
											<div class="col-12 col-md-9 mb-2 mb-md-0">
												<input class="form-control form-control-lg" id="search_content" value="" placeholder="Search what you want to read...">
											</div>
											<div class="col-12 col-md-2">
												<button type="button" class="btn btn-block btn-lg btn-primary" onclick="search()">Search</button>
											</div>
										</div>
									</form>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- End Single Slide -->
		</div>
		<!-- End Slider area -->
		<!-- Start Recent Announcement Area -->
		<section class="wn__recent__post bg--gray ptb--80">
			<div class="container">
				<div class="row">
					<div class="col-lg-12">
						<div class="section__title text-center">
							<h2 class="title__be--2"><a href="#">Recent <span class="color--theme">Announcement</span></a></h2>
						</div>
					</div>
				</div>
				<div class="row mt--50">
					<div class="col-md-6 col-lg-4 col-sm-12">
						<div class="post__itam">
							<div class="content">
								<h3><a href="#">Instructions for borrowing books </a></h3>
								<p>A user can only borrow up to 20 books.Each book can be borrowed for 45 days by default.If you overdue,you
									will be fined 1 cent per day each book.</p>
								<div class="post__time">
									<span class="day">Dec 13, 18</span>
								</div>
							</div>
						</div>
					</div>
					<div class="col-md-6 col-lg-4 col-sm-12">
						<div class="post__itam">
							<div class="content">
								<h3><a href="#">Instructions for borrowing books </a></h3>
								<p>A user can only borrow up to 20 books.Each book can be borrowed for 45 days by default.If you overdue,you
									will be fined 1 cent per day each book.</p>
								<div class="post__time">
									<span class="day">Dec 13, 18</span>
								</div>
							</div>
						</div>
					</div>
					<div class="col-md-6 col-lg-4 col-sm-12">
						<div class="post__itam">
							<div class="content">
								<h3><a href="#">Instructions for borrowing books </a></h3>
								<p>A user can only borrow up to 20 books.Each book can be borrowed for 45 days by default.If you overdue,you
									will be fined 1 cent per day each book.</p>
								<div class="post__time">
									<span class="day">Dec 13, 18</span>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<!-- End Recent Announcement Area -->

		<!-- Start BEst Seller Area -->
		<section class="wn__product__area brown--color pt--80  pb--30">
			<div class="container">
				<div class="row">
					<div class="col-lg-12">
						<div class="section__title text-center">
							<h2 class="title__be--2">New Books <span class="color--theme"> in the Library</span></h2>
							<p>Books are the tools to transform the soul. What humans need is an inspiring nutrient. Reading is the kind of
								nourishment. - Victor Hugo</p>
						</div>
					</div>
				</div>
				<!-- Start Single Tab Content -->
				<div class="furniture--4 border--round arrows_style owl-carousel owl-theme row mt--50">
					<!-- Start Single Product -->
					<div class="product product__style--3">
						<div class="col-lg-3 col-md-4 col-sm-6 col-12">
							<div class="product__thumb">
								<a class="first__img" href="advancedmaths.html"><img src="images/books/1.jpg" alt="product image"></a>
								<!-- <a class="second__img animation1" href="advancedmaths.html"><img src="images/books/2.jpg" alt="product image"></a> -->
								<!-- 可以展示该书的两张照片 -->
								<div class="hot__box">
									<span class="hot-label">Highest demand</span>
								</div>
							</div>
							<div class="product__content content--center">
								<h4><a href="single-product.html">Advanced Mathematics</br>(sixth edition,volume one)</a></h4>
								<ul class="prize d-flex">
									<li>5 items in stock</li>
									<li class="old_prize">has borrowed 15 books</li>
								</ul>
								<div class="action">
									<div class="actions_inner">
										<ul class="add_to_links">
											<li><a class="compare" href="#"><i class="bi bi-heart-beat"></i></a></li>
											<li><a data-toggle="modal" title="Quick View" class="quickview modal-view detail-link" href="#advancedmaths"><i
													 class="bi bi-search"></i></a></li>
										</ul>
									</div>
								</div>
								<!-- <div class="product__hover--content">
									<ul class="rating d-flex">
										<li class="on"><i class="fa fa-star-o"></i></li>
										<li class="on"><i class="fa fa-star-o"></i></li>
										<li class="on"><i class="fa fa-star-o"></i></li>
										<li class="on"><i class="fa fa-star-o"></i></li>
										<li><i class="fa fa-star-o"></i></li>
									</ul>
								</div> -->
							</div>
						</div>
					</div>
					<!-- Start Single Product -->
					<!-- Start Single Product -->
					<div class="product product__style--3">
						<div class="col-lg-3 col-md-4 col-sm-6 col-12">
							<div class="product__thumb">
								<a class="first__img" href="single-product.html"><img src="images/books/3.jpg" alt="product image"></a>
								<!-- <a class="second__img animation1" href="single-product.html"><img src="images/books/4.jpg" alt="product image"></a> -->
								<div class="hot__box ">
									<span class="hot-label">Classical</span>
								</div>
							</div>
							<div class="product__content content--center">
								<h4><a href="single-product.html">Operating System</a></h4>
								<ul class="prize d-flex">
									<li>6 items in stock</li><!-- 这里表示库存等，以模板里的prize类代替 -->
									<li class="old_prize">has borrowed 9 books</li>
								</ul>
								<div class="action">
									<div class="actions_inner">
										<ul class="add_to_links">
											<li><a class="compare" href="#"><i class="bi bi-heart-beat"></i></a></li>
											<li><a data-toggle="modal" title="Quick View" class="quickview modal-view detail-link" href="#productmodal2"><i
													 class="bi bi-search"></i></a></li>
										</ul>
									</div>
								</div>
							</div>
						</div>
					</div>
					<!-- Start Single Product -->
					<!-- Start Single Product -->
					<div class="product product__style--3">
						<div class="col-lg-3 col-md-4 col-sm-6 col-12">
							<div class="product__thumb">
								<a class="first__img" href="single-product.html"><img src="images/books/5.jpg" alt="product image"></a>
								<div class="hot__box">
									<span class="hot-label">Hot</span>
								</div>
							</div>
							<div class="product__content content--center">
								<h4><a href="single-product.html">The Kite Runner</a></h4>
								<ul class="prize d-flex">
									<li>9 items in stock</li><!-- 这里表示库存等，以模板里的prize类代替 -->
									<li class="old_prize">has borrowed 6 books</li>
								</ul>
								<div class="action">
									<div class="actions_inner">
										<ul class="add_to_links">
											<li><a class="compare" href="#"><i class="bi bi-heart-beat"></i></a></li>
											<li><a data-toggle="modal" title="Quick View" class="quickview modal-view detail-link" href="#productmodal3"><i
													 class="bi bi-search"></i></a></li>
										</ul>
									</div>
								</div>
							</div>
						</div>
					</div>
					<!-- Start Single Product -->
					<!-- Start Single Product -->
					<div class="product product__style--3">
						<div class="col-lg-3 col-md-4 col-sm-6 col-12">
							<div class="product__thumb">
								<a class="first__img" href="single-product.html"><img src="images/books/7.jpg" alt="product image"></a>
								<div class="hot__box">
									<span class="hot-label">New</span>
								</div>
							</div>
							<div class="product__content content--center">
								<h4><a href="single-product.html">Stardust</a></h4>
								<ul class="prize d-flex">
									<li>8 items in stock</li><!-- 这里表示库存等，以模板里的prize类代替 -->
									<li class="old_prize">has borrowed 2 books</li>
								</ul>
								<div class="action">
									<div class="actions_inner">
										<ul class="add_to_links">
											<li><a class="compare" href="#"><i class="bi bi-heart-beat"></i></a></li>
											<li><a data-toggle="modal" title="Quick View" class="quickview modal-view detail-link" href="#productmodal4"><i
													 class="bi bi-search"></i></a></li>
										</ul>
									</div>
								</div>
							</div>
						</div>
					</div>
					<!-- Start Single Product -->
					<!-- Start Single Product -->
					<div class="product product__style--3">
						<div class="col-lg-3 col-md-4 col-sm-6 col-12">
							<div class="product__thumb">
								<a class="first__img" href="single-product.html"><img src="images/books/9.jpg" alt="product image"></a>
								<div class="hot__box">
									<span class="hot-label">HOT</span>
								</div>
							</div>
							<div class="product__content content--center">
								<h4><a href="single-product.html">Unbearable lightness of life</a></h4>
								<ul class="prize d-flex">
									<li>5 items in stock</li><!-- 这里表示库存等，以模板里的prize类代替 -->
									<li class="old_prize">has borrowed 5 books</li>
								</ul>
								<div class="action">
									<div class="actions_inner">
										<ul class="add_to_links">
											<li><a class="compare" href="#"><i class="bi bi-heart-beat"></i></a></li>
											<li><a data-toggle="modal" title="Quick View" class="quickview modal-view detail-link" href="#productmodal5"><i
													 class="bi bi-search"></i></a></li>
										</ul>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- End Single Tab Content -->
			</div>
		</section>

		<!-- Footer Area -->
		<footer id="wn__footer" class="footer__area bg__cat--8 brown--color">
			<div class="footer-static-top">
				<div class="container">
					<div class="row">
						<div class="col-lg-12">
							<div class="footer__widget footer__menu">
								<div class="ft__logo">
									<a href="index.html">
										<img src="images/logo/logo黑字.png" width="150" height="50" alt="logo">
									</a>
									<p>Ideal books， is the key to wisdom。 -- Lev Tolstoy</p>
								</div>
								<!-- <div class="footer__content">
									<ul class="mainmenu d-flex justify-content-center">
										<li><a href="booklist.html">All Product</a></li>
										<li><a href="https://weibo.com">Blog</a></li>
										<li><a href="#">Contact</a></li>
										<li><a href="#"><img src="images/contact/wechat.png" width="35" height="35" ></a></li>
										<li><a href="#"><img src="images/contact/qq.png" width="35" height="35" ></a></li><
									</ul>
								</div> -->
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="copyright__wrapper">
				<div class="container">
					<div class="row">
						<div class="col-lg-12 col-md-6 col-sm-12">
							<div class="copyright">
								<div class="copy__right__inner text-center">
									<p>©2018 XDU-SPM-B2 Copyright</p>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</footer>
		<!-- //Footer Area -->
		<!-- QUICKVIEW PRODUCT -->
		<div id="quickview-wrapper">
			<!-- Modal -->
			<div class="modal fade" id="advancedmaths" tabindex="-1" role="dialog">
				<div class="modal-dialog modal__container" role="document">
					<div class="modal-content">
						<div class="modal-header modal__header">
							<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						</div>
						<div class="modal-body">
							<div class="modal-product">
								<!-- Start product images -->
								<div class="product-images">
									<div class="main-image images">
										<img alt="big images" src="images/books/1.jpg">
									</div>
								</div>
								<!-- end product images -->
								<div class="product-info">
									<h1>Advanced Maths</h1>
									<div class="rating__and__review">
										<ul class="rating">
											<li><span class="ti-star"></span></li>
											<li><span class="ti-star"></span></li>
											<li><span class="ti-star"></span></li>
											<li><span class="ti-star"></span></li>
											<li><span class="ti-star"></span></li>
										</ul>
									</div>
									<div class="price-box-3">
										<div class="s-price-box">
											<span class="new-price">5 items in stock</span>
											<span class="old-price">has borrowed 15 books</span>
										</div>
									</div>
									<div class="quick-desc">
										The sixth edition of Higher Mathematics is a book published by the Higher Education Press in 2007. The author
										is the Department of Mathematics of Tongji University.</br>
										The book is the sixth edition of the Higher Mathematics of the Department of Mathematics of Tongji
										University. It is revised according to the latest "Basic Requirements for the Teaching of Basic Mathematics
										Courses for Engineering Undergraduate Courses" for students of engineering majors in higher education
										institutions.
									</div>
									<div class="select__color">
										<!-- 代替搜索关键词 -->
										<h2>key</h2>
										<ul class="color__list">
											<li href="#">Math</a></li>
											<li href="#">education</a></li>
											<li href="#">Tongji University</a></li>
											<li href="#">sixth edition</a></li>
										</ul>
									</div>
									<div class="select__size">
										<h2>BookID</h2>
										<ul class="color__list">
											<li>ABCDE1234</li>
										</ul>
									</div>
									<div class="addtocart-btn">
										<a href="#">Want to Read</a>
										<a href="advancedmaths.html">learn more</a>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- END QUICKVIEW PRODUCT -->

	</div>
	<!-- //Main wrapper -->

	<!-- JS Files -->
	<script src="js/vendor/jquery-3.2.1.min.js"></script>
	<script src="js/popper.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/plugins.js"></script>
	<script src="js/active.js"></script>
	<script src="../socket.io.js"></script>
	<script src="../cookie.js"></script>
	<script src="https://code.jquery.com/jquery-1.11.1.js"></script>

	<script type="text/javascript">
		var auth_data = {};

		auth_data.username = Cookies.get("username");
		auth_data.session = Cookies.get("session");
		auth_data.type = Cookies.get("type");
		auth_data.cur = "reader";

		var socket = io("http://139.199.112.88:2761");

		

		socket.on("show_search", function (data) {
			Cookies.set('bookList', data);
			location.href = location.href.replace('index.html', 'search-list.html');
		});

		function search() {
			var data = $('#search_content').val();
			alert(data);
			socket.emit('searchReaderBooks', data);
		}

		function signinServer() {
			if (bntVal.value == "SIGN IN") {
				location.href = location.href.replace("index.html", "login.html");
			} else {
				socket.emit("logOut", auth_data);
				if (document.getElementById('ME') != null) {
					document.getElementById('topMenu').removeChild(document.getElementById('ME'));
				}
				bntVal.innerHTML = "SIGN IN";
				bntVal.value = "SIGN IN";
			}
		}

		function personConsole() {
			socket.emit("sessionAuth", auth_data);
			if (bntVal.value != 'LOG OUT') return;
			location.href = location.href.replace("index.html", "profile.html");
		}

		socket.on('sessionSuccess', function () {
			bntVal.innerHTML = "LOG OUT";
			bntVal.value = "LOG OUT";
			var btn = document.createElement('button');
			btn.setAttribute('id', 'ME');
			btn.setAttribute('value', 'ME');
			btn.setAttribute('class', 'btn btn-primary');
			btn.setAttribute('onclick', 'personConsole()');
			btn.innerHTML = 'Console';
			var parent = document.getElementById('topMenu');
			parent.appendChild(btn);
			//parent.insertBefore(btn,parent.firstChild);
		});
		socket.on("noSession", function (data) {
			window.alert('Login has expired, please login again!');
			if (document.getElementById('ME') != null) {
				document.getElementById('topMenu').removeChild(document.getElementById('ME'));
			}
			Cookies.remove('type');
			bntVal.innerHTML = "SIGN IN";
			bntVal.value = 'SIGN IN';
		});

		socket.on("sessionFailed", function (data) {
			window.alert('Login has expired, please login again!');
			if (document.getElementById('ME') != null) {
				document.getElementById('topMenu').removeChild(document.getElementById('ME'));
			}
			Cookies.remove('type');
			bntVal.innerHTML = "SIGN IN";
			bntVal.value = 'SIGN IN';
		});

		// 获取button内容

		var bntVal = document.getElementById("SI");

		// 判断当前用户是否登陆，若登陆则button内容为“LOG OUT”并判断session，反之为"SIGN IN"

		if (auth_data.type == "reader") {
			socket.emit("sessionAuth", auth_data);
		} else {
			bntVal.innerHTML = "SIGN IN";
			bntVal.value = "SIGN IN";
		}
		//window.alert('!!!');
		// button内容为SIGN IN，则按键后进入login.html，反之logOut且button内容改为“SIGN IN”

	</script>

</body>

</html>